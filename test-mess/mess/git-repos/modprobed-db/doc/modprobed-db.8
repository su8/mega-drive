.\" Text automatically generated by txt2man
.TH modprobed-db 8 "04 April 2015" "" ""
.SH NAME
\fBModprobed-db \fP- Store and recall every module probed on the system at will.
\fB
.SH SYNOPSIS
.nf
.fam C
\fBmodprobed-db\fP [\fIoptions\fP]

.fam T
.fi
.fam T
.fi
.SH DESCRIPTION
Modprobed-db is a useful utility for users wishing to build a minimal kernel via a "make localmodconfig" (written by Steven Rostedt). In a nutshell, Rostedt's localmodconfig takes every module currently loaded and adjusts the kernel's .config file to enable the corresponding selections for each one thus hardcoding them into the target kernel. This results in a system-specific, smaller kernel package and footprint as well as reduced compilation times.
.PP
Modprobed-db simply logs every module ever probed on the target system to a text-based database and can recall them, that is modprobes them all, to provide substrate for the "make localmodconfig" described above.
.SH OPTIONS
.TP
.B
list
Display to stdout the contents of the database defined in $HOME/.config/modprobed-db.conf.  Output is in alphabetical order.
.TP
.B
store
Take a snapshot of currently loaded modules and log them to the database file.  Note that this operation collects a cumulative list of all modules probed and only logs ones that \fBmodprobed-db\fP has not seen before.
.TP
.B
recall
Call modprobe for every module contained in the database.
.TP
.B
debug
Print the difference between /proc/modules and the database and the difference between the database and /proc/modules.
.SH QUICK SETUP

.IP 1. 4
Edit $HOME/.config/modprobed-db.conf to define modules to ignore in the IGNORE array. For example, modules that are not a provided by the Linux kernel package and are provided by an external package. The examples provided are a few suggestions specific to Arch Linux.
.IP 2. 4
Optionally edit $HOME/.config/modprobed-db.conf to define your terminal color scheme and the path to the database (default is $HOME/.config/modprobed.db).
.IP 3. 4
Optionally add an entry your crontab to have the script run at some regular interval via crontab \fB-e\fP.
.PP
.nf
.fam C
        For example, once every 5 min:
        */5 * * * *     /usr/bin/modprobed-db store &> /dev/null

        For example, once every hour:
        0 */1 * * *     /usr/bin/modprobed-db store &> /dev/null

.fam T
.fi
Systemd users not wishing to use cron may use the included \fBmodprobed-db\fP@.service which will run \fBmodprobed-db\fP in store mode once per hour, and at boot and on shutdown. Invoke it like so:
.PP
.nf
.fam C
 systemctl enable modprobed-db@USERNAME.service
 systemctl start modprobed-db@USERNAME.service

.fam T
.fi
Note that USERNAME should be replaced with the your user.
.SH SEE ALSO
\fBmodprobe\fP(8)
.SH BUGS
No known bugs.
.SH AUTHOR
graysky (graysky AT archlinux DOT us)
